(function(d,c,a,f){var b="modal",e={autoOpen:false,onlyOne:true,shaderClass:"-shader",closerClass:"-closer",content:null,header:null,beforeOpen:d.noop(),open:d.noop(),ifOpenedOrNot:d.noop(),ifNotOpened:d.noop(),beforeClose:d.noop(),close:d.noop(),ifClosedOrNot:d.noop(),ifNotClosed:d.noop()};Modal=function(g,i){this.element=g;this.name=b;this.options=d.extend({},this.options,e,i);this._setOptions(this.options);if(typeof d.modal==="undefined"){d.modal=[]}if(this.element!=="undefined"){d.modal.push(this.element)}d(this.element).css({display:"none",left:"50%",top:"50%",position:"fixed"});var h=this;d(this.element).find("."+h.options.closerClass).on("click",function(){h.close()});this.init()};Modal.prototype=new d.kit();Modal.prototype.constructor=Modal;Modal.prototype.__setOption=function(h,g){var j=this,i=d(j.element);switch(h){case"animation":if(d.easing===f||!(g in d.easing)){switch(g){case"scaleIn":i.addClass("-mx-scaleIn");break;case"growUp":i.addClass("-mx-growUp");break;case"rotateIn":i.addClass("-mx-rotateIn");break;case"dropIn":i.addClass("-mx-dropIn");break}}break;case"theme":i.addClass("-"+g+"-");break}j.options[h]=g};Modal.prototype.init=function(){var g=this;if(g.options.autoOpen){g.open()}};Modal.prototype._setPosition=function(){var j=this,i=d(j.element),h=i.outerWidth(),g=i.outerHeight();i.css({marginLeft:-h/2,marginTop:-g/2})};Modal.prototype.open=function(){var i=this,h=d(i.element);if(i.options.enabled===true&&i.state!=="opened"){i._openShader();i.state="in";if(i.options.beforeOpen!=="undefined"&&(typeof i.options.beforeOpen==="object"||typeof i.options.beforeOpen==="function")){try{var g=i.options.beforeOpen.call(h);g.done(function(){i._open()}).fail(function(){i._closeShader();i.state="closed";h.trigger("ifNotOpened."+i.name);h.trigger("ifOpenedOrNot."+i.name)})}catch(j){i._open()}}else{i._open()}}};Modal.prototype._open=function(){var h=this;var g=d(h.element);if(h.state==="in"){if(h.options.onlyOne){d.each(h._getOtherInstanses(d.modal),function(){if(d.data(this,"kit-"+h.name).getState()==="opened"){d.data(this,"kit-"+h.name).close()}})}h._setPosition();if(h.options.animation!==null&&h.options.animation!==false){h._openAnimation()}else{g.css({opacity:1}).show()}h.state="opened";g.trigger("open."+h.name)}g.trigger("ifOpenedOrNot."+h.name)};Modal.prototype._openAnimation=function(){var h=this;var g=d(h.element);d("html").addClass("-mx-shader");if(d.easing!=="undefined"&&(h.options.animation.split(/[ ,]+/)[1] in d.easing||h.options.animation.split(/[ ,]+/)[0] in d.easing)){h.element.css({opacity:1}).slideDown({duration:h.options.animationDuration,easing:h.options.animation.split(/[ ,]+/)[0]})}else{g.show();g.addClass("-mx-start")}};Modal.prototype.close=function(){var i=this;var h=d(i.element);if(i.options.enabled===true&&i.state!=="closed"){i.state="out";if(i.options.beforeClose!="undefined"&&(typeof i.options.beforeClose==="object"||typeof i.options.beforeClose==="function")){try{var g=i.options.beforeClose.call(h);g.done(function(){i._close()}).fail(function(){i._closeShader();h.trigger("ifNotClosed."+i.name);h.trigger("ifClosedOrNot."+i.name);i.state="opened"})}catch(j){i._close()}}else{i._close()}}};Modal.prototype._close=function(){var h=this;var g=d(h.element);h._closeShader();if(h.state==="out"){if(h.options.animation===null){h.element.hide()}else{h._closeAnimation()}h.state="closed";g.trigger("close")}g.trigger("ifClosedOrNot."+h.name)};Modal.prototype._closeAnimation=function(){var h=this;var g=d(h.element);d("html").removeClass("-mx-shader");if(d.easing!=="undefined"&&(h.options.animation.split(/[ ,]+/)[1] in d.easing||h.options.animation.split(/[ ,]+/)[0] in d.easing)){g.slideUp({duration:h.options.animationDuration,easing:h.options.animation.split(/[ ,]+/)[1]!=="undefined"?h.options.animation.split(/[ ,]+/)[1]:h.options.animation})}else{g.removeClass("-mx-start");g.hide()}};Modal.prototype._openShader=function(){var h=this,g=d(h.element);if(d.shader===f){d.shader=d('<div class="'+h.options.shaderClass+'"></div>');d("body").append(d.shader)}if(h.options.animation!==null||h.options.animation!==f){d.shader.fadeIn(150)}else{d.shader.css({opacity:1}).show()}};Modal.prototype._closeShader=function(){var h=this,g=d(h.element);if(d.shader===f){d.shader='<div class="'+h.options.shaderClass+'"></div>';d(a).append(d.shader)}if(h.options.animation!==null||h.options.animation!==f){d.shader.fadeOut(350)}else{d.shader.css({opacity:0}).hide()}};d.fn[b]=function(g){return this.each(function(){if(!d.data(this,"kit-"+b)){d.data(this,"kit-"+b,new Modal(this,g))}else{typeof g==="object"?d.data(this,"kit-"+b)._setOptions(g):typeof g==="string"&&g.charAt(0)!=="_"?d.data(this,"kit-"+b)[g]:d.error("What do you want to do?")}})}})(jQuery,window,document);