(function(d,c,a,f){var b="carousel",e={navigation:false,navigationPlacement:f,theme:"info",itemSelector:".js-carousel-item",controlSelector:".js-carousel-control",hideControls:true,hideControlsDistance:200,animation:true,slideshow:true,interval:15000,imageFill:false,imageShowAnimation:true,imageShowInterval:20000,captionAnimation:"blurIn",captionAnimationDelay:1000};Carousel=function(h,g){var i=this;this.name=b;this.element=h;this.controls=d([]);this.active=0;this.options=d.extend({},e,g);this._setOptions(this.options);this.init()};Carousel.prototype=new d.kit();Carousel.prototype.constructor=Carousel;Carousel.prototype.__setOption=function(i,g){var k=this;var j=d(k.element);switch(i){case"controlSelector":var h=d(a).find(g);k.controls.length>0&&k.controls.each(function(m,l){l.off("click."+k.name)});k.controls=d([]);h.each(function(m,l){d(a).find(d(l).attr("href"))[0]===d(k.element)[0]&&k.controls.push(d(l))});k.controls.each(function(m,l){l.fadeOut();l.on("click."+k.name,function(n){n.preventDefault()})});break;case"hideControls":j.off("mousemove."+k.name)&&g&&j.on("mousemove."+k.name,function(l){d.proxy(k.trackMouse(l),k)});break;case"itemSelector":k.items=j.find(g);k.images=d.map(k.items,function(l){return d(l).find("> img")[0]});k.captions=d.map(k.items,function(l){return d(l).find(".-carousel-caption > div")});k.navigation.html(d.map(k.items,function(l){return d("<i></i>")}));break;case"imageFill":j.imagesLoaded(function(){if(g&&k.images){var l=j.innerHeight(),m=j.innerWidth();j.addClass("-carousel-imageFill");d.each(k.items,function(o,n){d(n).css({height:"100%"})});d.each(k.images,function(q,r){var o=d(r).width(),n=d(r).height(),p=o/n;d(r).css({position:"absolute",top:0,left:0});m/l<p?d(r).css({width:"auto",height:"100%"}):d(r).css({width:"100%",height:"auto"})})}});break;case"captionAnimation":switch(g){case"blurIn":d.each(k.captions,function(m,l){d.each(l,function(n,o){d(o).addClass("-mx-blurIn")})});break}break;case"theme":j.removeClass("-"+k.options.theme+"-");j.addClass("-"+g+"-");k.navigation.addClass("-"+g+"-");break;case"enabled":g===true?j.removeClass("-disabled-"):j.addClass("-disabled-");break;case"navigation":if(typeof g==="boolean"){k.navigation=d('<div class="-carousel-nav"></div>');k.navigation.hide();d(k.element).append(k.navigation)}if(typeof g==="string"){k.navigation=d(g);k.navigation.hide()}k.navigation.on("click."+this.name,function(l){if(d(l.target).is("i")){var m=k.active;k.active=d(l.target).index();k.slideAnimate(m)}});g&&k.navigation.fadeIn();break;case"navigationPlacement":g&&j.addClass("_"+g+"_");break;case"slideshow":if(g){k.slideshow=setInterval(function(){d.proxy(k.setActive("next"),k)},k.options.interval);j.on("mouseenter",function(){clearInterval(k.slideshow)});j.on("mouseleave",function(){k.slideshow=setInterval(function(){d.proxy(k.setActive("next"),k)},k.options.interval)})}break}k.options[i]=g};Carousel.prototype.init=function(){var h=this,g=d(h.element);g.on("addItem",h.__setOption("itemSelector",h.options.itemSelector));g.on("click."+h.name,function(){for(var j=0;j<h.controls.length;j++){h.controls[j].is(":visible")&&h.slide(h.controls[j])}});setTimeout(d.proxy(h.slideAnimate,h),200);g.imagesLoaded(function(){g.animate({opacity:1})})};Carousel.prototype.trackMouse=function(h){var l=this,j=d(l.element),g=h.pageX-j.offset().left,m=j.width(),k=d.map(l.controls,function(n){if(n.data("slide")==="prev"){return n}})[0],i=d.map(l.controls,function(n){if(n.data("slide")==="next"){return n}})[0];l.options.hideControlsDistance>g?k.fadeIn():k.fadeOut();l.options.hideControlsDistance>m-g?i.fadeIn():i.fadeOut()};Carousel.prototype.slide=function(g){var j=this,i=d(j.element),h=d(g),k=h.data("slide");j.setActive(k)};Carousel.prototype.setActive=function(j){var h=this,g=d(h.element),i=h.active;if(j==="next"){h.active===h.items.length-1?h.active=0:h.active++}if(j==="prev"){h.active===0?h.active=h.items.length-1:h.active--}h.slideAnimate(i)};Carousel.prototype.slideAnimate=function(g){var i=this,h=d(i.element);if(d.easing&&i.options.animation in d.easing){d(i.items.eq(0)).animate({marginLeft:i.active*-100+"%"},i.startImageShowAnimation(g))}else{if(i.options.animation&&Modernizr.csstransitions){d(i.items.eq(0)).css({marginLeft:i.active*-100+"%"});i.startImageShowAnimation(g)}else{if(i.options.animation){d(i.items.eq(0)).animate({marginLeft:i.active*-100+"%"},i.startImageShowAnimation(g))}}}i.navigation.find("._active_").removeClass("_active_");i.navigation.find("i").eq(i.active).addClass("_active_")};Carousel.prototype.startImageShowAnimation=function(m){var j=this,h=d(j.element),g=d(j.images[m]),k=d(j.images[j.active]),l=h.innerHeight()-k.height(),i=h.innerWidth()-k.width();setTimeout(function(){g&&g.stop().css({top:0,left:0});m&&d.each(j.captions[m],function(n,o){switch(j.options.captionAnimation){case true:setTimeout(function(){d(o).stop().animate({opacity:0})},j.options.captionAnimationDelay*(n+1));break;case"blurIn":setTimeout(function(){d(o).removeClass("-mx-start")},j.options.captionAnimationDelay*(n+1));break}})},1000);j.options.imageFill&&j.options.imageShowAnimation&&h.imagesLoaded(function(){switch(j.options.imageShowAnimation){case"scrollDown":k.addClass("-mx-scrollDown").css({top:l,left:i});break;case"scrollDown-fast":k.addClass("-mx-scrollDown-fast").css({top:l,left:i});break;case true:k.animate({top:l,left:i},j.options.imageShowInterval);break}});d.each(j.captions[j.active],function(n,o){switch(j.options.captionAnimation){case true:setTimeout(function(){d(o).animate({opacity:1})},j.options.captionAnimationDelay*(n+1));break;case"blurIn":setTimeout(function(){d(o).addClass("-mx-start")},j.options.captionAnimationDelay*(n+1));break}})};d.fn[b]=function(g){return this.each(function(){if(!d.data(this,"kit-"+b)){d.data(this,"kit-"+b,new Carousel(this,g))}else{typeof g==="object"?d.data(this,"kit-"+b)._setOptions(g):typeof g==="string"&&g.charAt(0)!=="_"?d.data(this,"kit-"+b)[g]:d.error("What do you want to do?")}})}})(jQuery,window,document);